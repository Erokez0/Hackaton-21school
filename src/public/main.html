<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Главная</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #2b2b2b;
        }
        header {
            background-color: #333;
            color: #fff;
            padding: 10px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        main {
            padding: 40px;
            display: flex;
            flex-direction: row;
            align-items: start;
            gap: 10px;
        }
        a {
            color: #FFFFFF;
            text-decoration: none;
        }
        * {
            color: #fff;
            font-family: sans-serif;
        }
        .student {
            min-height: min-content;
            max-height: fit-content;
            width: 300px;
            border: 5px solid rgb( 68, 235, 153);
            border-radius: 20px;
            padding: 5px 5px 15px 5px;
            background-color: #333;
        }
        .logo {
            width: 70px;
            height: 70px;
        }
        .contacts {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .contacts * {
            margin: 0;

        }
        pre {
            margin: 0;
        }
        nav {
            padding: 10px;
            width: 15%;
            background: #333;
            height: 100%;
            display: flex;
            flex-direction: column;
            border-radius: 20px;
            border: 5px solid rgb(134,27,227);
        }
        .students {
            margin-left: auto;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            width: 80%;
        }
        #found,
        input,
        select {
            border: 2px solid #333;
            color:rgb(0,135,205);
            background: #333;
            padding: 10px;
            transition: 0.4s;
            flex-grow: 1;
        }
        select::scroll-marker {
            display: none;
        }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0; 
        }

        select:hover,
        select:focus {
            background: #333;
        }
        label {
            align-self: center;
            padding: 5px;
        }
        .skill-div {
            display: flex;
            gap: 5px
        }
        .skill-name {
            border-radius: 10px;
            padding: 2px;
            background-color: rgb(134,27,227);
        }
        .skill-points {
            padding: 2px;
        }
    </style>
</head>
<body>
    <header>
        <svg class='logo' width="201" height="202" viewBox="0 0 201 202" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M133.141 179.244C131.204 178.786 129.532 178.391 129.532 177.036C129.532 175.221 131.76 175.025 132.718 175.025C134.046 175.025 134.8 175.209 135.79 175.659C136.27 175.304 138.46 173.686 138.46 173.686C137.016 172.764 134.848 172.044 132.741 172.044C127.717 172.044 125.928 174.722 125.928 177.229C125.928 180.84 129.058 181.592 131.82 182.255C133.761 182.721 135.436 183.123 135.436 184.499C135.436 185.205 135.016 186.389 132.204 186.389C130.337 186.389 128.292 185.732 126.839 184.67L125.618 187.47C127.098 188.626 129.664 189.371 132.18 189.371C136.347 189.371 139.041 187.345 139.041 184.209C139.041 180.639 135.906 179.898 133.141 179.244Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M150.49 186.296H145.995V182.009H150.49C152.542 182.009 153.582 182.722 153.582 184.152C153.582 185.587 152.57 186.296 150.49 186.296ZM145.995 179.22H149.836H145.995ZM145.995 175.125H149.836C152.256 175.125 152.764 176.245 152.764 177.173C152.764 178.52 151.751 179.22 149.836 179.22H145.995V175.125ZM154.296 180.447L154.123 180.391L154.284 180.304C155.658 179.555 156.415 178.26 156.415 176.654C156.415 173.95 154.13 172.337 150.302 172.337H142.392V189.084H150.77C154.938 189.084 157.233 187.475 157.233 184.551C157.233 182.561 156.163 181.066 154.296 180.447Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M169.447 175.119L173.221 172.331H160.592V189.078H173.221V186.29H164.196V182.002H171.894V179.214H164.196V175.119H169.447Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M180.181 175.125H183.376C185.685 175.125 186.957 176.266 186.957 178.338C186.957 180.41 185.685 181.552 183.376 181.552H180.181V175.125ZM190.823 189.084L187.154 183.643C189.318 182.697 190.566 180.83 190.566 178.33C190.566 174.633 187.841 172.337 183.453 172.337H176.577V189.084H180.181V184.34H183.453C183.556 184.34 183.657 184.338 183.757 184.335L186.96 189.084H190.823Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M117.579 180.706C117.579 179.855 117.503 179.022 117.357 178.212L114.37 180.42C114.372 180.516 114.374 180.611 114.374 180.706C114.374 186.607 109.586 191.407 103.7 191.407C97.8154 191.407 93.0277 186.607 93.0277 180.706C93.0277 174.805 97.8154 170.004 103.7 170.004C105.931 170.004 108.003 170.694 109.717 171.872L112.417 169.877C110.034 167.946 107.002 166.789 103.701 166.789C96.0353 166.789 89.8213 173.02 89.8213 180.706C89.8213 188.392 96.0353 194.622 103.701 194.622C111.365 194.622 117.579 188.392 117.579 180.706Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M114.676 172.196C115.331 173.046 115.892 173.973 116.339 174.963L103.693 184.308L98.4092 180.987V176.991L103.693 180.312L114.676 172.196Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M163.253 34.9791C162.19 33.914 161.594 32.4698 161.594 30.9634V12.5077C161.594 9.64919 159.283 7.33179 156.431 7.33179H139.662C136.81 7.33179 134.499 9.64919 134.499 12.5077V29.3236C134.499 32.1815 136.81 34.4996 139.662 34.4996H158.059C159.561 34.4996 161.002 35.0973 162.064 36.1625L162.069 36.1674C163.13 37.2319 163.727 38.6761 163.727 40.1825V146.542C163.727 149.401 166.038 151.718 168.889 151.718H185.66C188.511 151.718 190.822 149.401 190.822 146.542V41.8186C190.822 38.9595 188.511 36.6421 185.66 36.6421H167.258C165.755 36.6421 164.315 36.0443 163.253 34.9791Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M37.2493 94.796L37.2706 94.7747C38.3323 93.7156 39.769 93.1208 41.2658 93.1208H86.7842C89.6223 93.1208 91.9226 90.8138 91.9226 87.9681V69.463C91.9226 67.9695 92.5164 66.5375 93.5726 65.4833L93.5927 65.4638C94.6544 64.4047 96.091 63.81 97.5891 63.81H116.012C118.85 63.81 121.151 61.5029 121.151 58.6572V41.795C121.151 38.9498 118.85 36.6422 116.012 36.6422H97.5867C96.0844 36.6422 94.644 36.0438 93.5823 34.9792C92.52 33.9141 91.9226 32.4699 91.9226 30.9636V12.4847C91.9226 9.63895 89.6223 7.33191 86.7842 7.33191H13.7289C10.844 7.33191 8.50488 9.67673 8.50488 12.5706V29.261C8.50488 32.1542 10.844 34.4997 13.7289 34.4997H88.3856C89.8897 34.4997 91.3319 35.0987 92.3954 36.1651C93.4589 37.2314 94.057 38.6775 94.057 40.1856V60.2842C94.057 61.7857 93.4602 63.2256 92.3985 64.2853L92.3845 64.2993C91.3234 65.3583 89.8867 65.9531 88.3899 65.9531H42.8714C40.034 65.9531 37.7331 68.2601 37.7331 71.1059V89.5963C37.7331 91.0941 37.1393 92.5304 36.0837 93.5901L36.0649 93.6077C35.0086 94.6668 33.5768 95.2621 32.083 95.2621H13.6439C10.8058 95.2621 8.50488 97.5692 8.50488 100.415V117.277C8.50488 120.123 10.8051 122.429 13.6439 122.429H32.1018C33.595 122.429 35.0281 123.024 36.0837 124.084H36.0843C37.1399 125.142 37.7331 126.578 37.7331 128.076V146.565C37.7331 149.411 40.034 151.717 42.8714 151.718L115.927 151.718C118.812 151.718 121.151 149.373 121.151 146.48V129.789C121.151 126.896 118.812 124.55 115.927 124.55L41.2652 124.549C39.7678 124.549 38.3311 123.955 37.2694 122.896L37.2493 122.877C36.1937 121.824 35.5999 120.392 35.5999 118.899V98.7745C35.5999 97.281 36.1937 95.8496 37.2493 94.796Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M180.039 86.5536L179.973 86.4859C179.872 86.386 179.816 86.2495 179.816 86.1081V84.1423C179.816 83.8474 179.577 83.6073 179.283 83.6073H174.484C174.343 83.6073 174.207 83.5512 174.107 83.4507L174.072 83.4154C173.972 83.3154 173.916 83.1789 173.916 83.0369V78.2114C173.916 77.9153 173.677 77.6764 173.383 77.6764H171.61C171.316 77.6764 171.077 77.9153 171.077 78.2114V92.2676C171.077 92.5625 171.316 92.802 171.61 92.802H173.383C173.677 92.802 173.916 92.5625 173.916 92.2676V83.5074L173.983 83.575C174.083 83.6749 174.139 83.8114 174.139 83.9528V85.9192C174.139 86.2142 174.378 86.4536 174.672 86.4536H179.471C179.612 86.4536 179.748 86.5103 179.848 86.6102L179.883 86.6456C179.983 86.7455 180.039 86.882 180.039 87.0234V92.2676C180.039 92.5625 180.278 92.802 180.572 92.802H182.344C182.639 92.802 182.878 92.5625 182.878 92.2676V78.2114C182.878 77.9153 182.639 77.6764 182.344 77.6764H180.572C180.278 77.6764 180.039 77.9153 180.039 78.2114V86.5536Z" fill="#212121"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M179.886 71.7944L179.859 71.8213C179.756 71.9242 179.617 71.9821 179.472 71.9821H176.984H174.496C174.352 71.9821 174.212 71.9242 174.109 71.8213L174.083 71.7944C173.98 71.6915 173.922 71.5519 173.922 71.4063V63.1244C173.922 62.9788 173.98 62.8399 174.083 62.7369L174.11 62.7095C174.213 62.6065 174.352 62.5486 174.497 62.5486H179.471C179.617 62.5486 179.755 62.6065 179.858 62.7095L179.885 62.7369C179.988 62.8399 180.046 62.9788 180.046 63.1244V65.0701C180.046 65.3736 180.29 65.6186 180.593 65.6186H182.337C182.639 65.6186 182.884 65.3736 182.884 65.0701V63.3219C182.884 63.019 182.639 62.7728 182.337 62.7728H180.397C180.252 62.7728 180.112 62.7156 180.01 62.6126L179.983 62.5858C179.88 62.4828 179.823 62.3426 179.823 62.1976V60.2513C179.823 59.9485 179.578 59.7023 179.275 59.7023H174.693C174.391 59.7023 174.146 59.9485 174.146 60.2513V62.197C174.146 62.3426 174.088 62.4822 173.985 62.5852L173.959 62.6126C173.856 62.7156 173.717 62.7728 173.571 62.7728H171.631C171.329 62.7728 171.084 63.019 171.084 63.3219V71.2088C171.084 71.5117 171.329 71.7573 171.631 71.7573H173.571C173.717 71.7573 173.855 71.8152 173.958 71.9181L173.985 71.9456C174.088 72.0485 174.146 72.1881 174.146 72.3337V74.2794C174.146 74.5823 174.391 74.8284 174.693 74.8284H177.815H179.275C179.578 74.8284 179.823 74.5823 179.823 74.2788V72.3337C179.823 72.1881 179.88 72.0485 179.983 71.9456L180.008 71.9206C180.111 71.8176 180.25 71.7597 180.395 71.7597H182.337C182.639 71.7597 182.885 71.5141 182.885 71.2113V69.4624C182.885 69.1596 182.639 68.9134 182.337 68.9134H180.593C180.291 68.9134 180.046 69.1596 180.046 69.4624V71.4057C180.046 71.5519 179.988 71.6915 179.886 71.7944Z" fill="#212121"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M179.852 98.6571L179.879 98.6845C179.982 98.7875 180.04 98.927 180.04 99.0733V107.354C180.04 107.5 179.982 107.64 179.879 107.743L179.853 107.769C179.75 107.872 179.611 107.93 179.465 107.93H174.49C174.345 107.93 174.206 107.872 174.103 107.769L174.076 107.742C173.974 107.639 173.916 107.5 173.916 107.354V99.0733C173.916 98.927 173.974 98.7875 174.076 98.6845L174.104 98.6571C174.206 98.5541 174.346 98.4962 174.491 98.4962H179.464C179.61 98.4962 179.749 98.5541 179.852 98.6571ZM179.816 98.1452V96.1995C179.816 95.8961 179.571 95.6505 179.269 95.6505H174.686C174.384 95.6505 174.14 95.8961 174.14 96.1995V98.1452C174.14 98.2903 174.082 98.4304 173.979 98.5334L173.952 98.5602C173.85 98.6632 173.71 98.7205 173.565 98.7205H171.625C171.323 98.7205 171.077 98.9667 171.077 99.2701V107.157C171.077 107.46 171.323 107.706 171.625 107.706H173.565C173.71 107.706 173.849 107.763 173.952 107.866L173.979 107.894C174.082 107.997 174.14 108.136 174.14 108.282V110.227C174.14 110.53 174.384 110.776 174.686 110.776H179.269C179.571 110.776 179.816 110.53 179.816 110.227V108.282C179.816 108.136 179.874 107.997 179.977 107.894L180.002 107.868C180.104 107.765 180.244 107.708 180.389 107.708H182.33C182.633 107.708 182.877 107.462 182.877 107.159V99.2701C182.877 98.9667 182.633 98.7205 182.33 98.7205H180.391C180.245 98.7205 180.106 98.6632 180.003 98.5602L179.977 98.5334C179.874 98.4304 179.816 98.2909 179.816 98.1452Z" fill="#212121"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M179.852 116.626L179.879 116.653C179.982 116.756 180.04 116.895 180.04 117.041V125.322C180.04 125.468 179.982 125.608 179.879 125.711L179.853 125.737C179.75 125.84 179.611 125.898 179.465 125.898H174.49C174.345 125.898 174.206 125.84 174.103 125.737L174.076 125.71C173.974 125.608 173.916 125.468 173.916 125.322V117.041C173.916 116.895 173.974 116.756 174.076 116.653L174.104 116.626C174.206 116.523 174.346 116.464 174.491 116.464H179.464C179.61 116.464 179.749 116.523 179.852 116.626ZM179.816 116.114V114.167C179.816 113.865 179.571 113.618 179.269 113.618H174.686C174.384 113.618 174.14 113.865 174.14 114.167V116.113C174.14 116.259 174.082 116.398 173.979 116.501L173.952 116.529C173.85 116.632 173.71 116.689 173.565 116.689H171.625C171.323 116.689 171.077 116.935 171.077 117.238V125.125C171.077 125.428 171.323 125.674 171.625 125.674H173.565C173.71 125.674 173.849 125.731 173.952 125.834L173.979 125.862C174.082 125.965 174.14 126.105 174.14 126.25V128.195C174.14 128.498 174.384 128.745 174.686 128.745L179.269 128.744C179.571 128.744 179.816 128.498 179.816 128.195V126.25C179.816 126.104 179.874 125.965 179.977 125.862L180.002 125.837C180.104 125.734 180.244 125.676 180.389 125.676H182.33C182.633 125.676 182.877 125.43 182.877 125.127V117.238C182.877 116.935 182.633 116.689 182.33 116.689H180.391C180.245 116.689 180.106 116.632 180.003 116.529L179.977 116.502C179.874 116.399 179.816 116.259 179.816 116.114Z" fill="#212121"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M174.139 42.2828V44.2285C174.139 44.3747 174.081 44.5137 173.978 44.6167L173.952 44.6435C173.849 44.7465 173.71 44.8049 173.565 44.8049H171.624C171.322 44.8049 171.077 45.0499 171.077 45.3534V47.1016C171.077 47.4045 171.322 47.6507 171.624 47.6507H173.565C173.71 47.6507 173.849 47.7079 173.952 47.8109L173.978 47.8383C174.081 47.9413 174.139 48.0809 174.139 48.2265V50.1722C174.139 50.4751 174.384 50.7212 174.686 50.7212H179.465C179.61 50.7212 179.749 50.7785 179.852 50.8815L179.879 50.9089C179.982 51.0119 180.039 51.1515 180.039 51.2971V53.4378C180.039 53.5834 179.982 53.7223 179.879 53.8253L179.852 53.8528C179.749 53.9557 179.61 54.0136 179.465 54.0136H171.624C171.322 54.0136 171.077 54.2592 171.077 54.562V56.3109C171.077 56.6138 171.322 56.8593 171.624 56.8593H179.268C179.571 56.8593 179.816 56.6138 179.816 56.3109V54.3652C179.816 54.2196 179.874 54.08 179.976 53.9771L180.001 53.9521C180.104 53.8491 180.243 53.7918 180.388 53.7918H182.33C182.633 53.7918 182.878 53.5456 182.878 53.2422V51.4939C182.878 51.1911 182.633 50.9455 182.33 50.9455H180.39C180.245 50.9455 180.106 50.8876 180.003 50.7846L179.976 50.7572C179.874 50.6542 179.816 50.5153 179.816 50.3696V48.4239C179.816 48.1205 179.571 47.8749 179.268 47.8749H174.49C174.345 47.8749 174.206 47.817 174.103 47.714L174.076 47.6866C173.974 47.5836 173.916 47.4447 173.916 47.2985V45.1566C173.916 45.0109 173.974 44.8714 174.076 44.7684L174.103 44.7404C174.206 44.638 174.346 44.5801 174.49 44.5801H182.33C182.633 44.5801 182.878 44.3339 182.878 44.0311V42.2828C182.878 41.9799 182.633 41.7344 182.33 41.7344H174.686C174.384 41.7344 174.139 41.9799 174.139 42.2828Z" fill="#212121"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M174.11 143.712L174.083 143.684C173.98 143.581 173.922 143.442 173.922 143.296V132.142C173.922 131.839 173.677 131.593 173.375 131.593H171.631C171.329 131.593 171.084 131.839 171.084 132.142V143.099C171.084 143.402 171.329 143.648 171.631 143.648H173.571C173.717 143.648 173.856 143.706 173.959 143.809L173.985 143.836C174.088 143.939 174.146 144.078 174.146 144.224V146.17C174.146 146.473 174.391 146.719 174.693 146.719H182.337C182.639 146.719 182.884 146.473 182.884 146.17V144.422C182.884 144.118 182.639 143.872 182.337 143.872H174.497C174.351 143.872 174.213 143.815 174.11 143.712Z" fill="#212121"/>
            </svg>
            
        <h1>
            <a href="http://localhost:3000/skills">Навыки</a>
        </h1>
    </header>
    <main>
        <nav>
            <label for="skill">Навык</label>
            <select name="skill" id="skill">
                <option value="C" selected >C</option>
            </select>
            <label for="order">Сортировка</label>
            <select name="order" id="order">
                <option value="desc">По убыванию</option>
                <option value="asc">По возрастанию</option>
            </select>
            <label for="take">Количество</label>
            <input type="number" name="take" id="take" value="10">
            <label for="page">Страница</label>
            <input type="number" name="page" id="page" value="1">
            <label for="count">Найдено</label>
            <p id="found">0</p>
        </nav>
        <div class="students"></div>
    </main>


    <script type="module">

        const selectSkill = document.querySelector('select');
        const skills = await fetch('http://localhost:3000/api/skills').then(res => res.json());
        for (const skill of skills) {
            if (skill == 'C') continue;
            const option = document.createElement('option');
            option.value = skill;
            option.innerText = skill;
            selectSkill.appendChild(option);
        }







        function clear() {
            const main = document.querySelector('div.students');
            main.replaceChildren();
        }
        function renderStudent(student) {
            const main = document.querySelector('div.students');
            const studentDiv = document.createElement('div');
            const name = document.createElement('h2');
            const email = document.createElement('pre');
            const skills = document.createElement('div');
            const phone = document.createElement('pre');
            name.innerText = student.name;
            email.innerText = student.email;
            phone.innerText = student.phone;
            const contacts = document.createElement('div');
            contacts.className = 'contacts';
            const contanctsHeader = document.createElement('h3');

            contanctsHeader.innerText = 'Контактные данные';
            contacts.append(contanctsHeader, email, phone);

            studentDiv.className = 'student';

            const skillsHeader = document.createElement('h3');
            skillsHeader.innerText = 'Навыки';
            for (const skill of student.skills.sort((a, b) => b.points - a.points)) {
                const div = document.createElement('div');
                div.className = 'skill-div';
                const name = document.createElement('name');
                const points = document.createElement('points');

                name.innerText = skill.name;
                name.className = 'skill-name';
                points.innerText = skill.points;
                points.className = 'skill-points';

                div.append(name, points);
                skills.appendChild(div);
            }

            studentDiv.append(name, contacts, skillsHeader, skills);
            main.append(studentDiv)
        }
        const selects = document.querySelectorAll('select');
        const inputs = document.querySelectorAll('input');
        for (let input of [ ...selects, ...inputs]) {
            input.addEventListener('change', async () => {
                const skill = encodeURIComponent(document.querySelector('#skill').value);
                const order = document.querySelector('#order').value;
                const take = document.querySelector('#take').value;
                const page = document.querySelector('#page').value;
                const found = document.querySelector('#found');
                let url = encodeURI(`http://localhost:3000/api/allStudents?order=${order}&take=${take}&page=${page}&skill=${skill}`);
                const response = await fetch(url, { method: 'GET' });
                const students = await response.json();
                clear()
                found.innerText = students.length
                students.forEach(student => renderStudent(student));
            });
        }

        let url = `http://localhost:3000/api/allStudents?order=DESC&skill=C&take=10&page=1`;
        const response = await fetch(url, { method: 'GET' });
        const students = await response.json();
        found.innerText = students.length;
        clear()
        students.forEach(student => renderStudent(student));

        

    </script>
</body>
</html>